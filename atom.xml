<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Peijie Liu - Electrical Engineering Portfolio</title>
  
  <subtitle>Innovation at the Intersection of Engineering and Experience</subtitle>
  <link href="https://peijieliugt.github.io/atom.xml" rel="self"/>
  
  <link href="https://peijieliugt.github.io/"/>
  <updated>2026-01-14T21:43:11.386Z</updated>
  <id>https://peijieliugt.github.io/</id>
  
  <author>
    <name>Peijie Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Template: Personal Story Title</title>
    <link href="https://peijieliugt.github.io/2025/01/10/template-stories-writing/"/>
    <id>https://peijieliugt.github.io/2025/01/10/template-stories-writing/</id>
    <published>2025-01-10T05:00:00.000Z</published>
    <updated>2026-01-14T21:43:11.386Z</updated>
    
    <content type="html"><![CDATA[<details class="ai-disclaimer human-only"><summary><strong>‚úçÔ∏è Authorship Note</strong> (click to expand)</summary><p>This piece is <strong>100% human-authored</strong>. No AI assistance was used in writing, editing, or proofreading this content. What you read here represents my authentic voice and personal perspective.</p></details><hr><h2 id="Your-Story-Begins-Here"><a href="#Your-Story-Begins-Here" class="headerlink" title="Your Story Begins Here"></a>Your Story Begins Here</h2><p>Write your personal story, reflection, or creative piece here. This category is for content that showcases your authentic writing voice‚Äîno AI polish, just you.</p><h3 id="Section-Heading"><a href="#Section-Heading" class="headerlink" title="Section Heading"></a>Section Heading</h3><p>Continue your narrative‚Ä¶</p><h3 id="Another-Section"><a href="#Another-Section" class="headerlink" title="Another Section"></a>Another Section</h3><p>More content‚Ä¶</p><hr><p><em>Thanks for reading. If you enjoyed this piece, check out my other <a href="/categories/Stories-Writing/">stories and writings</a>.</em></p>]]></content>
    
    
    <summary type="html">A brief excerpt that will appear in the post list...</summary>
    
    
    
    <category term="Stories &amp; Writing" scheme="https://peijieliugt.github.io/categories/Stories-Writing/"/>
    
    
    <category term="Personal" scheme="https://peijieliugt.github.io/tags/Personal/"/>
    
    <category term="Reflection" scheme="https://peijieliugt.github.io/tags/Reflection/"/>
    
  </entry>
  
  <entry>
    <title>Template: Tech Note Title</title>
    <link href="https://peijieliugt.github.io/2025/01/10/template-tech-notes/"/>
    <id>https://peijieliugt.github.io/2025/01/10/template-tech-notes/</id>
    <published>2025-01-10T05:00:00.000Z</published>
    <updated>2026-01-14T21:34:04.749Z</updated>
    
    <content type="html"><![CDATA[<details class="ai-disclaimer"><summary><strong>üìù AI Assistance Disclosure</strong> (click to expand)</summary><p>This note has been lightly edited with AI assistance for clarity. All technical content and observations are my own.</p><p><strong>Looking for polished project documentation?</strong> Check out <a href="/categories/Technical-Projects/">Technical Projects</a>.<br><strong>Want my unfiltered thoughts?</strong> See <a href="/categories/Stories-Writing/">Stories &amp; Writing</a>.</p></details><hr><h2 id="Quick-Context"><a href="#Quick-Context" class="headerlink" title="Quick Context"></a>Quick Context</h2><p>What were you working on? What problem did you encounter?</p><h2 id="The-Solution-Discovery"><a href="#The-Solution-Discovery" class="headerlink" title="The Solution &#x2F; Discovery"></a>The Solution &#x2F; Discovery</h2><p>What did you figure out?</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// Code snippet if applicable</span><br></code></pre></td></tr></table></figure><h2 id="Key-Takeaways"><a href="#Key-Takeaways" class="headerlink" title="Key Takeaways"></a>Key Takeaways</h2><ul><li>Point 1</li><li>Point 2</li><li>Point 3</li></ul><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="#">Link to documentation</a></li><li><a href="#">Related resource</a></li></ul><hr><p><em>Just a quick note from my engineering journal. More detailed projects in <a href="/categories/Technical-Projects/">Technical Projects</a>.</em></p>]]></content>
    
    
    <summary type="html">A quick note about something I learned or worked on today...</summary>
    
    
    
    <category term="Tech Notes" scheme="https://peijieliugt.github.io/categories/Tech-Notes/"/>
    
    
    <category term="Quick Note" scheme="https://peijieliugt.github.io/tags/Quick-Note/"/>
    
    <category term="TIL" scheme="https://peijieliugt.github.io/tags/TIL/"/>
    
  </entry>
  
  <entry>
    <title>GPS-Disciplined Oscillator (GPSDO) - Achieving 40ppb Accuracy</title>
    <link href="https://peijieliugt.github.io/2024/10/15/gpsdo-project/"/>
    <id>https://peijieliugt.github.io/2024/10/15/gpsdo-project/</id>
    <published>2024-10-15T04:00:00.000Z</published>
    <updated>2025-01-10T05:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<details class="ai-disclaimer"><summary><strong>üìù AI Assistance Disclosure</strong> (click to expand)</summary><p>This technical documentation has been proofread by Claude (Anthropic) for readability, grammar, and formatting consistency. All technical content, project details, circuit designs, measurements, and conclusions have been verified and approved by the author.</p><p><strong>Interested in my personal writing style?</strong> Check out my <a href="/categories/Stories-Writing/">Stories &amp; Writing</a> category for 100% human-authored content.</p></details><hr><h2 id="Project-Overview"><a href="#Project-Overview" class="headerlink" title="Project Overview"></a>Project Overview</h2><p>The GPS-Disciplined Oscillator (GPSDO) project aims to create a precision frequency reference by locking a high-quality oven-controlled crystal oscillator (OCXO) to GPS timing signals. This project achieved <strong>40 parts-per-billion (ppb)</strong> long-term frequency accuracy‚Äîexceeding my initial 10ppb target by a factor of 4.</p><img src="/2024/10/15/gpsdo-project/gpsdolayout.jpg" class="" title="GPSDO Mk.1 PCB 3D Render in Altium Designer"><h2 id="System-Architecture"><a href="#System-Architecture" class="headerlink" title="System Architecture"></a>System Architecture</h2><p>The system consists of several key components:</p><h3 id="Core-Hardware"><a href="#Core-Hardware" class="headerlink" title="Core Hardware"></a>Core Hardware</h3><ul><li><strong>Microcontroller</strong>: STM32F030 running at 48MHz</li><li><strong>OCXO</strong>: Isotemp OCXO134-10 with ¬±50ppb initial accuracy</li><li><strong>GPS Module</strong>: u-blox NEO-6M with 1PPS output</li><li><strong>DAC</strong>: 16-bit SPI DAC for fine frequency adjustment</li><li><strong>Power Management</strong>: Custom LDO design with thermal isolation</li></ul><img src="/2024/10/15/gpsdo-project/gpsdoprog.png" class="" title="Firmware structure showing the control loop implementation"><h3 id="Control-Algorithm"><a href="#Control-Algorithm" class="headerlink" title="Control Algorithm"></a>Control Algorithm</h3><p>The heart of the system is a custom <strong>diverging control algorithm</strong> with dead-zone handling:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">static</span> <span class="hljs-type">uint16_t</span> current_dac = <span class="hljs-number">0x8000</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">set_dac</span><span class="hljs-params">(<span class="hljs-type">int</span> inc)</span> &#123;<br>  current_dac += inc &lt;&lt; <span class="hljs-number">4</span>;<br>  HAL_GPIO_WritePin(ADC_CS_GPIO_Port, ADC_CS_Pin, GPIO_PIN_RESET);<br>  <span class="hljs-type">uint8_t</span> d[<span class="hljs-number">3</span>] = &#123;<span class="hljs-number">8</span>, current_dac &gt;&gt; <span class="hljs-number">8</span> &amp; <span class="hljs-number">0xff</span>, current_dac &amp; <span class="hljs-number">0xff</span>&#125;;<br>  HAL_SPI_Transmit(&amp;hspi1, d, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>);<br>  HAL_GPIO_WritePin(ADC_CS_GPIO_Port, ADC_CS_Pin, GPIO_PIN_SET);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update_dac</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; RING_SIZE; i++) &#123;<br>    sum += ring[i];<br>  &#125;<br>  set_dac(-sum / RING_SIZE);<br>&#125;<br></code></pre></td></tr></table></figure><p>The algorithm uses a ring buffer to average phase measurements, implementing a form of PI control with adjustable gain.</p><h2 id="Technical-Challenges-Solutions"><a href="#Technical-Challenges-Solutions" class="headerlink" title="Technical Challenges &amp; Solutions"></a>Technical Challenges &amp; Solutions</h2><h3 id="Challenge-1-Component-Substitution"><a href="#Challenge-1-Component-Substitution" class="headerlink" title="Challenge 1: Component Substitution"></a>Challenge 1: Component Substitution</h3><p>The original BOM specified a TI REF5050 voltage reference, but supply chain issues forced a substitution. The replacement part had different thermal characteristics, causing drift issues.</p><p><strong>Solution</strong>: Implemented a ‚Äúhot-wire‚Äù resistor fix to compensate for the thermal coefficient mismatch, adjusting the temperature-to-voltage relationship at the firmware level.</p><h3 id="Challenge-2-Control-Loop-Instability"><a href="#Challenge-2-Control-Loop-Instability" class="headerlink" title="Challenge 2: Control Loop Instability"></a>Challenge 2: Control Loop Instability</h3><p>Initial testing revealed oscillation in the control loop when the OCXO approached lock.</p><p><strong>Solution</strong>: Developed a custom diverging algorithm with dead-zone control. When phase error falls within ¬±2 counts, the system stops adjusting, preventing hunting behavior.</p><img src="/2024/10/15/gpsdo-project/gpsdoactual.jpg" class="" title="The assembled GPSDO Mk.1 board during testing"><h2 id="Measurement-Results"><a href="#Measurement-Results" class="headerlink" title="Measurement Results"></a>Measurement Results</h2><p>Testing was performed using Keysight CXA signal analyzer and EXG vector signal generator as reference.</p><img src="/2024/10/15/gpsdo-project/gpsdoresult1.jpg" class="" title="Spectrum analysis showing the 10MHz output - 100Hz span"><p>The spectrum analysis shows:</p><ul><li><strong>Center Frequency</strong>: 10.000000 MHz (exact)</li><li><strong>Output Power</strong>: +12.06 dBm</li><li><strong>Phase Noise</strong>: Better than -70 dBc&#x2F;Hz at 1Hz offset</li></ul><img src="/2024/10/15/gpsdo-project/gpsdoresult2.jpg" class="" title="Close-in spectrum with 10Hz span showing excellent stability"><p>With a 10Hz span and 1Hz resolution bandwidth, the signal shows excellent short-term stability with no visible sidebands or spurious content.</p><h2 id="PCB-Design-Notes"><a href="#PCB-Design-Notes" class="headerlink" title="PCB Design Notes"></a>PCB Design Notes</h2><p>The PCB was designed in <strong>Altium Designer</strong> with the following considerations:</p><ul><li><strong>4-layer stackup</strong>: Signal-Ground-Power-Signal for optimal EMI performance</li><li><strong>Thermal isolation</strong>: The OCXO section is thermally isolated from the MCU and GPS module</li><li><strong>Star grounding</strong>: Analog and digital grounds meet at a single point under the DAC</li><li><strong>Controlled impedance</strong>: 50Œ© traces for the RF output path</li></ul><h2 id="Future-Improvements"><a href="#Future-Improvements" class="headerlink" title="Future Improvements"></a>Future Improvements</h2><ol><li><strong>Kalman Filter Implementation</strong>: Replace the simple averaging with a Kalman filter for better noise rejection</li><li><strong>Custom PCB Rev 2</strong>: Fix the thermal issues with proper copper pour optimization  </li><li><strong>GPS Holdover</strong>: Add a rubidium backup for GPS signal loss scenarios</li><li><strong>Remote Monitoring</strong>: Add WiFi&#x2F;Ethernet for SNMP-based monitoring</li></ol><h2 id="Applications"><a href="#Applications" class="headerlink" title="Applications"></a>Applications</h2><p>This GPSDO is suitable for:</p><ul><li>Amateur radio frequency calibration</li><li>Test equipment reference</li><li>Time-nuts experiments</li><li>SDR frequency stabilization</li></ul><h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><ul><li><strong>Schematic</strong>: Available on request</li><li><strong>Firmware</strong>: <a href="#">GitHub Repository</a> (coming soon)</li><li><strong>Bilibili Video</strong>: <a href="#">Design walkthrough</a></li></ul><hr><p><em>Have questions about this project? Feel free to reach out via the <a href="/contact/">Contact</a> page.</em></p>]]></content>
    
    
    <summary type="html">A custom GPS-disciplined oscillator achieving 40 parts-per-billion frequency accuracy through innovative control algorithms and thermal management.</summary>
    
    
    
    <category term="Technical Projects" scheme="https://peijieliugt.github.io/categories/Technical-Projects/"/>
    
    
    <category term="Embedded Systems" scheme="https://peijieliugt.github.io/tags/Embedded-Systems/"/>
    
    <category term="STM32" scheme="https://peijieliugt.github.io/tags/STM32/"/>
    
    <category term="PCB Design" scheme="https://peijieliugt.github.io/tags/PCB-Design/"/>
    
  </entry>
  
</feed>
