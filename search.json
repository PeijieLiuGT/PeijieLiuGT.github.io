[{"title":"GPS-Disciplined Oscillator (GPSDO) - Achieving 40ppb Accuracy","url":"/2024/10/15/gpsdo-project/","content":"\nüìù AI Assistance Disclosure (click to expand)\n\nThis technical documentation has been proofread by Claude (Anthropic) for readability, grammar, and formatting consistency. All technical content, project details, circuit designs, measurements, and conclusions have been verified and approved by the author.\nInterested in my personal writing style? Check out my Stories &amp; Writing category for 100% human-authored content.\n\n\n\nProject OverviewThe GPS-Disciplined Oscillator (GPSDO) project aims to create a precision frequency reference by locking a high-quality oven-controlled crystal oscillator (OCXO) to GPS timing signals. This project achieved 40 parts-per-billion (ppb) long-term frequency accuracy‚Äîexceeding my initial 10ppb target by a factor of 4.\n\n\nSystem ArchitectureThe system consists of several key components:\nCore Hardware\nMicrocontroller: STM32F030 running at 48MHz\nOCXO: Isotemp OCXO134-10 with ¬±50ppb initial accuracy\nGPS Module: u-blox NEO-6M with 1PPS output\nDAC: 16-bit SPI DAC for fine frequency adjustment\nPower Management: Custom LDO design with thermal isolation\n\n\n\nControl AlgorithmThe heart of the system is a custom diverging control algorithm with dead-zone handling:\nstatic uint16_t current_dac = 0x8000;void set_dac(int inc) &#123;  current_dac += inc &lt;&lt; 4;  HAL_GPIO_WritePin(ADC_CS_GPIO_Port, ADC_CS_Pin, GPIO_PIN_RESET);  uint8_t d[3] = &#123;8, current_dac &gt;&gt; 8 &amp; 0xff, current_dac &amp; 0xff&#125;;  HAL_SPI_Transmit(&amp;hspi1, d, 3, 0);  HAL_GPIO_WritePin(ADC_CS_GPIO_Port, ADC_CS_Pin, GPIO_PIN_SET);&#125;void update_dac() &#123;  int sum = 0;  for (int i = 0; i &lt; RING_SIZE; i++) &#123;    sum += ring[i];  &#125;  set_dac(-sum / RING_SIZE);&#125;\n\nThe algorithm uses a ring buffer to average phase measurements, implementing a form of PI control with adjustable gain.\nTechnical Challenges &amp; SolutionsChallenge 1: Component SubstitutionThe original BOM specified a TI REF5050 voltage reference, but supply chain issues forced a substitution. The replacement part had different thermal characteristics, causing drift issues.\nSolution: Implemented a ‚Äúhot-wire‚Äù resistor fix to compensate for the thermal coefficient mismatch, adjusting the temperature-to-voltage relationship at the firmware level.\nChallenge 2: Control Loop InstabilityInitial testing revealed oscillation in the control loop when the OCXO approached lock.\nSolution: Developed a custom diverging algorithm with dead-zone control. When phase error falls within ¬±2 counts, the system stops adjusting, preventing hunting behavior.\n\n\nMeasurement ResultsTesting was performed using Keysight CXA signal analyzer and EXG vector signal generator as reference.\n\n\nThe spectrum analysis shows:\n\nCenter Frequency: 10.000000 MHz (exact)\nOutput Power: +12.06 dBm\nPhase Noise: Better than -70 dBc&#x2F;Hz at 1Hz offset\n\n\n\nWith a 10Hz span and 1Hz resolution bandwidth, the signal shows excellent short-term stability with no visible sidebands or spurious content.\nPCB Design NotesThe PCB was designed in Altium Designer with the following considerations:\n\n4-layer stackup: Signal-Ground-Power-Signal for optimal EMI performance\nThermal isolation: The OCXO section is thermally isolated from the MCU and GPS module\nStar grounding: Analog and digital grounds meet at a single point under the DAC\nControlled impedance: 50Œ© traces for the RF output path\n\nFuture Improvements\nKalman Filter Implementation: Replace the simple averaging with a Kalman filter for better noise rejection\nCustom PCB Rev 2: Fix the thermal issues with proper copper pour optimization  \nGPS Holdover: Add a rubidium backup for GPS signal loss scenarios\nRemote Monitoring: Add WiFi&#x2F;Ethernet for SNMP-based monitoring\n\nApplicationsThis GPSDO is suitable for:\n\nAmateur radio frequency calibration\nTest equipment reference\nTime-nuts experiments\nSDR frequency stabilization\n\nResources\nSchematic: Available on request\nFirmware: GitHub Repository (coming soon)\nBilibili Video: Design walkthrough\n\n\nHave questions about this project? Feel free to reach out via the Contact page.\n","categories":["Technical Projects"],"tags":["Embedded Systems","STM32","PCB Design"]},{"title":"Template: Personal Story Title","url":"/2025/01/10/template-stories-writing/","content":"\n‚úçÔ∏è Authorship Note (click to expand)\n\nThis piece is 100% human-authored. No AI assistance was used in writing, editing, or proofreading this content. What you read here represents my authentic voice and personal perspective.\n\n\n\nYour Story Begins HereWrite your personal story, reflection, or creative piece here. This category is for content that showcases your authentic writing voice‚Äîno AI polish, just you.\nSection HeadingContinue your narrative‚Ä¶\nAnother SectionMore content‚Ä¶\n\nThanks for reading. If you enjoyed this piece, check out my other stories and writings.\n","categories":["Stories & Writing"],"tags":["Personal","Reflection"]},{"title":"Template: Tech Note Title","url":"/2025/01/10/template-tech-notes/","content":"\nüìù AI Assistance Disclosure (click to expand)\n\nThis note has been lightly edited with AI assistance for clarity. All technical content and observations are my own.\nLooking for polished project documentation? Check out Technical Projects.Want my unfiltered thoughts? See Stories &amp; Writing.\n\n\n\nQuick ContextWhat were you working on? What problem did you encounter?\nThe Solution &#x2F; DiscoveryWhat did you figure out?\n// Code snippet if applicable\n\nKey Takeaways\nPoint 1\nPoint 2\nPoint 3\n\nReferences\nLink to documentation\nRelated resource\n\n\nJust a quick note from my engineering journal. More detailed projects in Technical Projects.\n","categories":["Tech Notes"],"tags":["Quick Note","TIL"]}]